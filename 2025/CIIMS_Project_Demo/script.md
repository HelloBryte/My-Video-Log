# CIIMS Smart Inventory Management System Script

各位技术同仁，大家好。今天我为大家介绍 CIIMS，校园智能库存管理系统的技术架构。

技术栈采用 PySide6 构建桌面前端，MySQL 作为数据存储，核心亮点是嵌入式 AI 助手。系统定位很明确，是基于 AI 的桌面端库存管理解决方案。核心模块包括登录认证、主控制台、借阅归还、以及 AI 助手四大模块。整个系统采用单体应用架构，确保部署简单、维护成本低。

接下来，请看系统的实际运行演示。

系统采用轻量化启动，支持账号密码及人脸识别双重认证，确保校园资产管理的安全性与便捷性。进入用户端，核心借阅流程极度简化。用户只需选择物品、设定归还日期，即可一键完成借阅申请，交互逻辑清晰直观。归还操作同样高效。系统实时同步库存状态，确保每一次资产流转都有据可查，实现了借还业务的数字化闭环。在个人中心，用户可实时查看借阅历史与逾期状态，并支持人脸数据的自助更新。

这是系统的核心亮点，CIMS Sherlock 智能助手。区别于传统搜索，它支持自然语言交互。无论是询问你是谁，还是模糊查询现在有什么书可以借，AI 都能通过意图识别与数据库检索，精准返回带有库存数量的实时结果，极大降低了用户的检索门槛。

切换至管理员视角。我们提供了高效的库存录入功能，支持自定义分类与批量管理，快速响应物资入库需求。在管理面板，管理员可对全校成百上千件资产进行可视化查阅与编辑。同时，集成了完整的用户权限管理与全校借阅记录审计，数据一目了然。AI 助手同样赋能于管理端。面对复杂的数据查询需求，比如列出所有用户信息，管理员无需编写 SQL，只需一句指令，AI 即可自动调取底层数据并整理呈现。CIIMS，让校园库存管理更智能，更高效。

演示过后，让我们深入探讨一下背后的技术实现。

AI 助手是系统的技术核心，采用嵌入式设计而非独立服务。让我重点讲一下请求生命周期：用户输入首先被捕获，然后调用模型进行意图分类。这里的关键是双路径路由：普通对话走通用通道，数据库查询走专用通道。整个流程基于 QThread 异步处理，通过 Signal Slot 机制确保 UI 响应性。这种设计避免了传统 CS 架构的网络延迟问题。

这是整个系统的技术难点。我们采用 LLM 进行意图分类，关键在于提示词工程。我们强制 LLM 返回结构化 JSON，包含意图类型、置信度和推理过程三个字段。置信度评分完全由 LLM 自评估，范围 0.0 到 1.0。当分类失败时，系统采用保守策略，默认回退到通用问答路径。这种设计确保了系统的鲁棒性，宁可答错，不能越权。值得注意的是，我们使用 response format 强制 JSON 输出，避免了自然语言解析的复杂性。

模糊处理是另一个技术亮点。传统关键词匹配无法理解语义，我们的方案是在提示词层面解决。比如用户说我想借书，系统会生成包含模糊匹配的 SQL。从自然语言到 SQL 的转换分为四步：上下文构建、SQL 提案生成、SQL 提取验证、以及安全执行。整个过程确保每一步都可控、可审计。实体抽取完全依赖 LLM 的语义理解，不需要额外的 NLP 库，降低了系统复杂度。

安全是数据库操作的底线。我们实现了三层防护：第一层，SQL 类型检查，仅允许 SELECT 语句；第二层，关键词拦截，DELETE、UPDATE 等操作直接拒绝；第三层，表级权限验证，普通用户无法访问 users 表。所有 SQL 执行前都会经过函数校验，任何越权请求都会被拦截并记录日志。这种接口级控制确保了数据安全。

部署方面，AI 集成采用 OpenRouter 兼容协议，支持本地化部署。通信层使用 httpx 客户端，设置 60 秒超时和快速失败策略。这种设计既保证了响应速度，又避免了资源占用。

总结一下，这个架构的技术优势在于：嵌入式设计、双路径处理、严格安全验证。但我们也面临性能瓶颈，比如 LLM 调用延迟、同步 SQL 执行以及内存占用问题。下一步优化方向很明确：引入意图分类缓存、异步 SQL 执行和流式响应实现。

这个项目展示了如何将 AI 能力深度集成到传统桌面应用中，为智能化办公系统提供了新的技术思路。

谢谢大家！
